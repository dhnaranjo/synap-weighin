= render partial: "nav"
%h1{class: 'text-center'}= "WEIGH-IN #{@event.name}"
%h2{class: 'text-center'}= @event.tagline
- unsorted_people = @event.people.includes(:league)
- sorted_people = Person.ordered_by_up_by(unsorted_people, @event)
%div{class: 'table-container'}
  %table{border: 0, class: 'table table-condensed borderless'}
    %tr
      %th{class: 'ordinal'}
      %th{class: 'text-left person-name'} NAME
      %th{class: 'text-right weight'} UP BY
    - sorted_people.each_with_index do |person, index|
      %tr
        %td{class: 'ordinal'}= index + 1
        %td{class: 'person-name'}= link_to(person.name, person_path(person.id))
        - up_by = person.up_by.to_f
        - positive = up_by > 0 ? 'positive' : 'negative'
        - rounded_up_by = up_by.round(3)
        - rounded_percentage_change = person.percentage_change.round(2)
        - padded_percentage_change = sprintf("%+.2f", rounded_percentage_change)
        %td{class: "#{positive} text-right weight"}= "#{up_by} (#{padded_percentage_change}%)"
-# = render partial: "current_@event_table", locals: { competition: @event }
%br
- league_sorted_people = sorted_people.group_by(&:league)
- league_sorted_people.each do |league, people|
  %h3= league.name
  %table
    - people.each_with_index do |person, index|
      %tr
        %td{class: 'ordinal'}= index + 1
        %td{class: "text-left"}=link_to(person.name, person_path(person.id))
        %td{class: "text-left weight"}=person.up_by(@event)
-# - @event.leagues.each do |league|
-#   %h3= league.name
-#   - people = @event.people.select { |person| person.league == league }
-#   = render partial: "past_@event_table", locals: { people: people, event: @event }
%br
%br
%br
%br
= link_to('OTHER EVENTS', events_path)
= link_to('CHECK IN', new_checkin_path, class: 'btn btn-default btn-block navbar navbar-fixed-bottom button-link') unless ENV['QUIET_MODE']
